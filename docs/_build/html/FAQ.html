

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartRoute - Frequently Asked Questions &mdash; SmartRoute 0.5.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8e576371"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Basic Usage" href="guide/basic-usage.html" />
    <link rel="prev" title="Quick Start" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SmartRoute
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#from-pypi">From PyPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#with-optional-dependencies">With Optional Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installation.html#pydantic-plugin">Pydantic Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#development-tools">Development Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="installation.html#all-dependencies">All Dependencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#from-source">From Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#verify-installation">Verify Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#your-first-router">Your First Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#custom-entry-names">Custom Entry Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#building-hierarchies">Building Hierarchies</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#adding-plugins">Adding Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#validating-arguments">Validating Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#next-steps">Next Steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="quickstart.html#need-help">Need Help?</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SmartRoute - Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-smartroute">What is SmartRoute?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-problem-does-smartroute-solve">What problem does SmartRoute solve?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#smartroute-vs-function-dictionary">SmartRoute vs function dictionary?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#is-smartroute-a-web-framework">Is SmartRoute a web framework?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#core-concepts">Core Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-is-a-router">What is a Router?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-does-the-route-decorator-work">How does the &#64;route decorator work?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-is-routedclass">What is RoutedClass?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hierarchies-and-child-routers">Hierarchies and Child Routers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-organize-nested-routers">How do I organize nested routers?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-access-child-routers">How do I access child routers?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#do-plugins-inherit-to-children">Do plugins inherit to children?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#plugin-system">Plugin System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-are-plugins">What are plugins?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-use-built-in-plugins">How do I use built-in plugins?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-configure-plugins-at-runtime">How do I configure plugins at runtime?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#can-i-create-custom-plugins">Can I create custom plugins?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scope-and-channel">Scope and Channel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-are-scope-and-channel">What are scope and channel?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#when-should-i-use-publishplugin">When should I use PublishPlugin?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-use-cases">Advanced Use Cases</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-register-handlers-dynamically">How do I register handlers dynamically?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-handle-errors-and-defaults">How do I handle errors and defaults?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-use-smartasync">How do I use SmartAsync?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-introspect-the-structure">How do I introspect the structure?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#comparisons">Comparisons</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#smartroute-vs-decorator-dispatch">SmartRoute vs decorator dispatch?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#no-plugin-named-x-attached-to-router">“No plugin named ‘X’ attached to router”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#handler-name-collision">“Handler name collision”</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plugins-don-t-propagate-to-children">Plugins don’t propagate to children</a></li>
<li class="toctree-l3"><a class="reference internal" href="#validationerror-with-pydantic">ValidationError with Pydantic</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#best-practices">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#when-should-i-use-smartroute">When should I use SmartRoute?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#does-plugin-order-matter">Does plugin order matter?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-test-code-with-smartroute">How do I test code with SmartRoute?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#useful-links">Useful Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contributing">Contributing</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="guide/basic-usage.html">Basic Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#creating-your-first-router">Creating Your First Router</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#registering-handlers">Registering Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#calling-handlers">Calling Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#using-prefixes-and-custom-names">Using Prefixes and Custom Names</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#default-handlers">Default Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#dynamic-handler-registration">Dynamic Handler Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#building-hierarchies">Building Hierarchies</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#introspection">Introspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/basic-usage.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guide/plugins.html">Plugin Development</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#built-in-plugins">Built-in Plugins</a><ul>
<li class="toctree-l3"><a class="reference internal" href="guide/plugins.html#publish-ready-plugin-ecosystem">Publish-ready plugin (ecosystem)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#creating-custom-plugins">Creating Custom Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#plugin-hooks">Plugin Hooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="guide/plugins.html#on-decore-router-func-entry">on_decore(router, func, entry)</a></li>
<li class="toctree-l3"><a class="reference internal" href="guide/plugins.html#wrap-handler-router-entry-call-next">wrap_handler(router, entry, call_next)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#plugin-registration">Plugin Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#per-instance-state">Per-Instance State</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#runtime-data">Runtime Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#plugin-configuration">Plugin Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#complete-example-authorization-plugin">Complete Example: Authorization Plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugins.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guide/plugin-configuration.html">Plugin Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide/plugin-configuration.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugin-configuration.html#target-syntax">Target Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugin-configuration.html#basic-configuration">Basic Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugin-configuration.html#batch-updates">Batch Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugin-configuration.html#introspection">Introspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugin-configuration.html#exposing-configuration-api">Exposing Configuration API</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugin-configuration.html#error-handling">Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugin-configuration.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/plugin-configuration.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guide/hierarchies.html">Hierarchical Routers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#basic-hierarchy">Basic Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#dictionary-registration">Dictionary Registration</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#flexible-registration-patterns">Flexible Registration Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#plugin-inheritance">Plugin Inheritance</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#dotted-path-navigation">Dotted Path Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#introspection">Introspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#real-world-example">Real-World Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#best-practices">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide/hierarchies.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guide/best-practices.html">Best Practices</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/reference.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#constructor-and-slots">Constructor and slots</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#registration-and-naming">Registration and naming</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#marker-discovery">Marker discovery</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#handler-table-and-wrapping">Handler table and wrapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#lookup-and-execution">Lookup and execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#children">Children</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#child-discovery-helpers">Child discovery helpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#introspection">Introspection</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#hooks-for-subclasses">Hooks for subclasses</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#invariants-and-guarantees">Invariants and guarantees</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter"><code class="docutils literal notranslate"><span class="pre">BaseRouter</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.__init__"><code class="docutils literal notranslate"><span class="pre">BaseRouter.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.instance"><code class="docutils literal notranslate"><span class="pre">BaseRouter.instance</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.name"><code class="docutils literal notranslate"><span class="pre">BaseRouter.name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.prefix"><code class="docutils literal notranslate"><span class="pre">BaseRouter.prefix</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.add_entry"><code class="docutils literal notranslate"><span class="pre">BaseRouter.add_entry()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.get"><code class="docutils literal notranslate"><span class="pre">BaseRouter.get()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.__getitem__"><code class="docutils literal notranslate"><span class="pre">BaseRouter.__getitem__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.call"><code class="docutils literal notranslate"><span class="pre">BaseRouter.call()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.entries"><code class="docutils literal notranslate"><span class="pre">BaseRouter.entries()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.add_child"><code class="docutils literal notranslate"><span class="pre">BaseRouter.add_child()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.get_child"><code class="docutils literal notranslate"><span class="pre">BaseRouter.get_child()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.describe"><code class="docutils literal notranslate"><span class="pre">BaseRouter.describe()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.members"><code class="docutils literal notranslate"><span class="pre">BaseRouter.members()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.base_router.BaseRouter.iter_plugins"><code class="docutils literal notranslate"><span class="pre">BaseRouter.iter_plugins()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#internal-state">Internal state</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#global-registry">Global registry</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#attaching-plugins">Attaching plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#runtime-flags-and-data">Runtime flags and data</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#wrapping-pipeline">Wrapping pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#entry-plugin-application">Entry/plugin application</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#inheritance-behaviour">Inheritance behaviour</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#filtering">Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#description-hooks">Description hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#data-shapes">Data shapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#router-invariants">Router Invariants</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router"><code class="docutils literal notranslate"><span class="pre">Router</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.__init__"><code class="docutils literal notranslate"><span class="pre">Router.__init__()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.register_plugin"><code class="docutils literal notranslate"><span class="pre">Router.register_plugin()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.available_plugins"><code class="docutils literal notranslate"><span class="pre">Router.available_plugins()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.plug"><code class="docutils literal notranslate"><span class="pre">Router.plug()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.iter_plugins"><code class="docutils literal notranslate"><span class="pre">Router.iter_plugins()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.set_plugin_enabled"><code class="docutils literal notranslate"><span class="pre">Router.set_plugin_enabled()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.is_plugin_enabled"><code class="docutils literal notranslate"><span class="pre">Router.is_plugin_enabled()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.set_runtime_data"><code class="docutils literal notranslate"><span class="pre">Router.set_runtime_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.get_runtime_data"><code class="docutils literal notranslate"><span class="pre">Router.get_runtime_data()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.instance"><code class="docutils literal notranslate"><span class="pre">Router.instance</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.name"><code class="docutils literal notranslate"><span class="pre">Router.name</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.router.Router.prefix"><code class="docutils literal notranslate"><span class="pre">Router.prefix</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#re-exports">Re-exports</a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#smartroute.core.decorators.route"><code class="docutils literal notranslate"><span class="pre">route()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#smartroute.core.decorators.routers"><code class="docutils literal notranslate"><span class="pre">routers()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="api/reference.html#smartroute.core.decorators.RoutedClass"><code class="docutils literal notranslate"><span class="pre">RoutedClass</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/reference.html#smartroute.core.decorators.RoutedClass.routedclass"><code class="docutils literal notranslate"><span class="pre">RoutedClass.routedclass</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/plugins.html">Plugin API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/plugins.html#module-smartroute.plugins.logging">Auto-Generated Plugin API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#responsibilities">Responsibilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#behaviour-and-api">Behaviour and API</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#registration">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#smartroute.plugins.logging.LoggingPlugin"><code class="docutils literal notranslate"><span class="pre">LoggingPlugin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.logging.LoggingPlugin.__init__"><code class="docutils literal notranslate"><span class="pre">LoggingPlugin.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.logging.LoggingPlugin.wrap_handler"><code class="docutils literal notranslate"><span class="pre">LoggingPlugin.wrap_handler()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.logging.LoggingPlugin.name"><code class="docutils literal notranslate"><span class="pre">LoggingPlugin.name</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.logging.LoggingPlugin.description"><code class="docutils literal notranslate"><span class="pre">LoggingPlugin.description</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.logging.LoggingPlugin.config"><code class="docutils literal notranslate"><span class="pre">LoggingPlugin.config</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#id1">Responsibilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#dependencies-and-guards">Dependencies and guards</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#behaviour-and-data">Behaviour and data</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#id2">Registration</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/plugins.html#smartroute.plugins.pydantic.PydanticPlugin"><code class="docutils literal notranslate"><span class="pre">PydanticPlugin</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.pydantic.PydanticPlugin.__init__"><code class="docutils literal notranslate"><span class="pre">PydanticPlugin.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.pydantic.PydanticPlugin.on_decore"><code class="docutils literal notranslate"><span class="pre">PydanticPlugin.on_decore()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.pydantic.PydanticPlugin.wrap_handler"><code class="docutils literal notranslate"><span class="pre">PydanticPlugin.wrap_handler()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.pydantic.PydanticPlugin.name"><code class="docutils literal notranslate"><span class="pre">PydanticPlugin.name</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.pydantic.PydanticPlugin.description"><code class="docutils literal notranslate"><span class="pre">PydanticPlugin.description</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.pydantic.PydanticPlugin.config"><code class="docutils literal notranslate"><span class="pre">PydanticPlugin.config</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/plugins.html#smartroute.plugins.pydantic.PydanticPlugin.describe_entry"><code class="docutils literal notranslate"><span class="pre">PydanticPlugin.describe_entry()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SmartRoute</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">SmartRoute - Frequently Asked Questions</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/genropy/smartroute/blob/main/docs/FAQ.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="smartroute-frequently-asked-questions">
<h1>SmartRoute - Frequently Asked Questions<a class="headerlink" href="#smartroute-frequently-asked-questions" title="Link to this heading"></a></h1>
<!-- test: test_switcher_basic.py::test_orders_quick_example -->
<section id="what-is-smartroute">
<h2>What is SmartRoute?<a class="headerlink" href="#what-is-smartroute" title="Link to this heading"></a></h2>
<section id="what-problem-does-smartroute-solve">
<h3>What problem does SmartRoute solve?<a class="headerlink" href="#what-problem-does-smartroute-solve" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: I have many methods in a class and want to call them dynamically by string name. How can I organize them better?</p>
<p><strong>Answer</strong>: SmartRoute lets you create a “router” that maps string names to Python methods, with per-instance isolation and hierarchy support. Instead of manually managing a dictionary of handlers, you use the <code class="docutils literal notranslate"><span class="pre">&#64;route()</span></code> decorator and SmartRoute handles the rest.</p>
<!-- test: test_switcher_basic.py::test_orders_quick_example -->
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">smartroute</span><span class="w"> </span><span class="kn">import</span> <span class="n">RoutedClass</span><span class="p">,</span> <span class="n">Router</span><span class="p">,</span> <span class="n">route</span>

<span class="k">class</span><span class="w"> </span><span class="nc">OrdersAPI</span><span class="p">(</span><span class="n">RoutedClass</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;orders&quot;</span><span class="p">)</span>

    <span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;orders&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;order-1&quot;</span><span class="p">,</span> <span class="s2">&quot;order-2&quot;</span><span class="p">]</span>

    <span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;orders&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;created&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">payload</span><span class="p">}</span>

<span class="n">orders</span> <span class="o">=</span> <span class="n">OrdersAPI</span><span class="p">()</span>
<span class="n">orders</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;list&quot;</span><span class="p">)()</span>  <span class="c1"># Calls list()</span>
<span class="n">orders</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;create&quot;</span><span class="p">)({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;order-3&quot;</span><span class="p">})</span>  <span class="c1"># Calls create()</span>
</pre></div>
</div>
</section>
<section id="smartroute-vs-function-dictionary">
<h3>SmartRoute vs function dictionary?<a class="headerlink" href="#smartroute-vs-function-dictionary" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: Why not just use a dictionary <code class="docutils literal notranslate"><span class="pre">{&quot;list&quot;:</span> <span class="pre">self.list,</span> <span class="pre">&quot;create&quot;:</span> <span class="pre">self.create}</span></code>?</p>
<p><strong>Answer</strong>: SmartRoute offers:</p>
<ul class="simple">
<li><p><strong>Plugin system</strong>: add logging, validation, audit without touching handlers</p></li>
<li><p><strong>Hierarchies</strong>: organize routers in trees with <code class="docutils literal notranslate"><span class="pre">add_child()</span></code></p></li>
<li><p><strong>Metadata</strong>: each handler can have scopes, channels, configurations</p></li>
<li><p><strong>Introspection</strong>: <code class="docutils literal notranslate"><span class="pre">router.members()</span></code> and <code class="docutils literal notranslate"><span class="pre">describe()</span></code> to explore structure</p></li>
<li><p><strong>Isolation</strong>: each instance has its own router with independent plugins</p></li>
</ul>
<p>For simple apps, a dictionary may suffice. For complex services, SmartRoute provides structure and extensibility.</p>
</section>
<section id="is-smartroute-a-web-framework">
<h3>Is SmartRoute a web framework?<a class="headerlink" href="#is-smartroute-a-web-framework" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: Does SmartRoute replace FastAPI/Flask?</p>
<p><strong>Answer</strong>: <strong>No</strong>. SmartRoute is an <strong>internal</strong> routing engine for organizing Python methods. It doesn’t handle HTTP, WebSocket, or networking. It’s used <strong>inside</strong> an application for:</p>
<ul class="simple">
<li><p>CLI tools (Publisher)</p></li>
<li><p>Internal orchestrators</p></li>
<li><p>Service composition</p></li>
<li><p>Dynamic dashboards</p></li>
</ul>
<p>You can use SmartRoute <strong>alongside</strong> FastAPI to organize your internal handlers before exposing them via HTTP.</p>
</section>
</section>
<section id="core-concepts">
<h2>Core Concepts<a class="headerlink" href="#core-concepts" title="Link to this heading"></a></h2>
<section id="what-is-a-router">
<h3>What is a Router?<a class="headerlink" href="#what-is-a-router" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: What exactly does a <code class="docutils literal notranslate"><span class="pre">Router</span></code> do?</p>
<!-- test: test_switcher_basic.py::test_instance_bound_methods_are_isolated -->
<p><strong>Answer</strong>: A <code class="docutils literal notranslate"><span class="pre">Router</span></code> is an object that:</p>
<ol class="arabic simple">
<li><p><strong>Registers handlers</strong>: methods decorated with <code class="docutils literal notranslate"><span class="pre">&#64;route()</span></code></p></li>
<li><p><strong>Resolves by name</strong>: <code class="docutils literal notranslate"><span class="pre">router.get(&quot;method_name&quot;)</span></code> → callable</p></li>
<li><p><strong>Applies plugins</strong>: intercepts decoration and execution</p></li>
<li><p><strong>Is isolated per instance</strong>: each object has its own router</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Service</span><span class="p">(</span><span class="n">RoutedClass</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">)</span>

    <span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;service:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="n">s1</span> <span class="o">=</span> <span class="n">Service</span><span class="p">(</span><span class="s2">&quot;alpha&quot;</span><span class="p">)</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">Service</span><span class="p">(</span><span class="s2">&quot;beta&quot;</span><span class="p">)</span>
<span class="n">s1</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">)()</span>  <span class="c1"># &quot;service:alpha&quot;</span>
<span class="n">s2</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;info&quot;</span><span class="p">)()</span>  <span class="c1"># &quot;service:beta&quot;</span>
</pre></div>
</div>
<p>Each instance (<code class="docutils literal notranslate"><span class="pre">s1</span></code>, <code class="docutils literal notranslate"><span class="pre">s2</span></code>) has a <strong>separate and isolated</strong> router.</p>
</section>
<section id="how-does-the-route-decorator-work">
<h3>How does the &#64;route decorator work?<a class="headerlink" href="#how-does-the-route-decorator-work" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: What does <code class="docutils literal notranslate"><span class="pre">&#64;route(&quot;api&quot;)</span></code> exactly do?</p>
<!-- test: test_switcher_basic.py::test_prefix_and_name_override -->
<p><strong>Answer</strong>: The <code class="docutils literal notranslate"><span class="pre">&#64;route(&quot;router_name&quot;)</span></code> decorator marks a method to be registered in a specific router. When you create the instance and call <code class="docutils literal notranslate"><span class="pre">Router(self,</span> <span class="pre">name=&quot;api&quot;)</span></code>, the router finds all methods marked with <code class="docutils literal notranslate"><span class="pre">&#64;route(&quot;api&quot;)</span></code> and registers them automatically.</p>
<p><strong>Options</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">)</span>  <span class="c1"># Auto name (method name)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">list_users</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="o">...</span>

<span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;users&quot;</span><span class="p">)</span>  <span class="c1"># Explicit name</span>
<span class="k">def</span><span class="w"> </span><span class="nf">handle_users</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="o">...</span>

<span class="c1"># With Router(prefix=&quot;handle_&quot;)</span>
<span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">handle_create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="o">...</span>  <span class="c1"># Registered as &quot;create&quot; (strips prefix)</span>
</pre></div>
</div>
</section>
<section id="what-is-routedclass">
<h3>What is RoutedClass?<a class="headerlink" href="#what-is-routedclass" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: Do I always need to inherit from <code class="docutils literal notranslate"><span class="pre">RoutedClass</span></code>?</p>
<p><strong>Answer</strong>: <strong>Recommended but not required</strong>. <code class="docutils literal notranslate"><span class="pre">RoutedClass</span></code> provides:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">obj.routedclass</span></code> proxy to access all routers</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obj.routedclass.configure()</span></code> for global configuration</p></li>
<li><p>Automatic router registry management</p></li>
</ul>
<p><strong>Without RoutedClass</strong> you can still use <code class="docutils literal notranslate"><span class="pre">Router</span></code> directly, but you lose the unified proxy.</p>
</section>
</section>
<section id="hierarchies-and-child-routers">
<h2>Hierarchies and Child Routers<a class="headerlink" href="#hierarchies-and-child-routers" title="Link to this heading"></a></h2>
<section id="how-do-i-organize-nested-routers">
<h3>How do I organize nested routers?<a class="headerlink" href="#how-do-i-organize-nested-routers" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: I have an application with modules (sales, finance, admin) that I want to organize hierarchically. How?</p>
<!-- test: test_switcher_basic.py::test_dashboard_hierarchy -->
<p><strong>Answer</strong>: Use <code class="docutils literal notranslate"><span class="pre">add_child()</span></code> to connect child routers:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Dashboard</span><span class="p">(</span><span class="n">RoutedClass</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sales</span> <span class="o">=</span> <span class="n">SalesModule</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">finance</span> <span class="o">=</span> <span class="n">FinanceModule</span><span class="p">()</span>

        <span class="c1"># Connect children by attribute name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="s2">&quot;sales, finance&quot;</span><span class="p">)</span>

<span class="n">dashboard</span> <span class="o">=</span> <span class="n">Dashboard</span><span class="p">()</span>
<span class="c1"># Access with dotted path</span>
<span class="n">dashboard</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sales.report&quot;</span><span class="p">)()</span>
<span class="n">dashboard</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;finance.summary&quot;</span><span class="p">)()</span>
</pre></div>
</div>
</section>
<section id="how-do-i-access-child-routers">
<h3>How do I access child routers?<a class="headerlink" href="#how-do-i-access-child-routers" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: Once connected, how do I call child handlers?</p>
<p><strong>Answer</strong>: Use <strong>dotted path</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dotted path</span>
<span class="n">dashboard</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;sales.report&quot;</span><span class="p">)()</span>

<span class="c1"># Or direct access</span>
<span class="n">dashboard</span><span class="o">.</span><span class="n">sales</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;report&quot;</span><span class="p">)()</span>

<span class="c1"># Introspection</span>
<span class="n">members</span> <span class="o">=</span> <span class="n">dashboard</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">members</span><span class="p">()</span>
<span class="c1"># {</span>
<span class="c1">#   &quot;handlers&quot;: {...},</span>
<span class="c1">#   &quot;children&quot;: {</span>
<span class="c1">#     &quot;sales&quot;: {...},</span>
<span class="c1">#     &quot;finance&quot;: {...}</span>
<span class="c1">#   }</span>
<span class="c1"># }</span>
</pre></div>
</div>
</section>
<section id="do-plugins-inherit-to-children">
<h3>Do plugins inherit to children?<a class="headerlink" href="#do-plugins-inherit-to-children" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: If I attach a plugin to the parent router, do children see it?</p>
<!-- test: test_switcher_basic.py::test_parent_plugins_inherit_to_children -->
<p><strong>Answer</strong>: <strong>Yes, automatically</strong>. Plugins propagate from parent to children:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Parent</span><span class="p">(</span><span class="n">RoutedClass</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;logging&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">child_obj</span> <span class="o">=</span> <span class="n">Child</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">child_obj</span><span class="o">.</span><span class="n">api</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;child&quot;</span><span class="p">)</span>

<span class="c1"># Child automatically inherits logging plugin</span>
<span class="n">parent</span> <span class="o">=</span> <span class="n">Parent</span><span class="p">()</span>
<span class="n">parent</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;child.method&quot;</span><span class="p">)()</span>  <span class="c1"># Logs with level=debug</span>
</pre></div>
</div>
</section>
</section>
<section id="plugin-system">
<h2>Plugin System<a class="headerlink" href="#plugin-system" title="Link to this heading"></a></h2>
<section id="what-are-plugins">
<h3>What are plugins?<a class="headerlink" href="#what-are-plugins" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: What is a plugin in SmartRoute and what is it for?</p>
<p><strong>Answer</strong>: A <strong>plugin</strong> extends router behavior without modifying handlers. Plugins intercept:</p>
<ol class="arabic simple">
<li><p><strong>Decoration</strong> (<code class="docutils literal notranslate"><span class="pre">on_decore</span></code>): when a handler is registered</p></li>
<li><p><strong>Execution</strong> (<code class="docutils literal notranslate"><span class="pre">wrap_handler</span></code>): when a handler is called</p></li>
</ol>
<p><strong>Use cases</strong>:</p>
<ul class="simple">
<li><p><strong>Logging</strong>: record all calls</p></li>
<li><p><strong>Validation</strong>: check input with Pydantic</p></li>
<li><p><strong>Audit</strong>: track who/when/what</p></li>
<li><p><strong>Scope</strong>: limit handler visibility by channel</p></li>
</ul>
</section>
<section id="how-do-i-use-built-in-plugins">
<h3>How do I use built-in plugins?<a class="headerlink" href="#how-do-i-use-built-in-plugins" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: Does SmartRoute have ready-to-use plugins?</p>
<!-- test: test_plugins_new.py::test_logging_plugin_runs_per_instance -->
<p><strong>Answer</strong>: Yes, 2 built-in plugins:</p>
<p><strong>1. LoggingPlugin</strong> - Automatic logging</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">router</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;logging&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">)</span>
<span class="n">router</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">)()</span>  <span class="c1"># Auto-logs the call</span>
</pre></div>
</div>
<p><strong>2. PydanticPlugin</strong> - Input validation</p>
<!-- test: test_pydantic_plugin.py::test_pydantic_plugin_accepts_valid_input -->
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CreateRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">count</span><span class="p">:</span> <span class="nb">int</span>

<span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">req</span><span class="p">:</span> <span class="n">CreateRequest</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;created&quot;</span><span class="p">}</span>

<span class="n">router</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;pydantic&quot;</span><span class="p">)</span>
<span class="n">router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;create&quot;</span><span class="p">)({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">})</span>  <span class="c1"># OK</span>
<span class="n">router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;create&quot;</span><span class="p">)({</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">})</span>  <span class="c1"># ValidationError</span>
</pre></div>
</div>
<p>Scope/channel policies are provided by the SmartPublisher ecosystem plugin; see <em>Scope and Channel</em> below.</p>
</section>
<section id="how-do-i-configure-plugins-at-runtime">
<h3>How do I configure plugins at runtime?<a class="headerlink" href="#how-do-i-configure-plugins-at-runtime" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: I want to change plugin configuration after creating the router.</p>
<!-- test: test_router_edge_cases.py::test_routed_configure_updates_plugins_global_and_local -->
<p><strong>Answer</strong>: Use <code class="docutils literal notranslate"><span class="pre">routedclass.configure()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Global for all handlers</span>
<span class="n">obj</span><span class="o">.</span><span class="n">routedclass</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;api:logging&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;warning&quot;</span><span class="p">)</span>

<span class="c1"># For specific handler</span>
<span class="n">obj</span><span class="o">.</span><span class="n">routedclass</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;api:logging/create&quot;</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># With wildcards</span>
<span class="n">obj</span><span class="o">.</span><span class="n">routedclass</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;*:logging/*&quot;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">)</span>

<span class="c1"># Query configuration</span>
<span class="n">report</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">routedclass</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&quot;?&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="can-i-create-custom-plugins">
<h3>Can I create custom plugins?<a class="headerlink" href="#can-i-create-custom-plugins" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: How do I write a custom plugin?</p>
<p><strong>Answer</strong>: Inherit from <code class="docutils literal notranslate"><span class="pre">BasePlugin</span></code> and implement the hooks:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">smartroute.plugins</span><span class="w"> </span><span class="kn">import</span> <span class="n">BasePlugin</span>

<span class="k">class</span><span class="w"> </span><span class="nc">AuditPlugin</span><span class="p">(</span><span class="n">BasePlugin</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_decore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">router</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">entry</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called when handler is registered&quot;&quot;&quot;</span>
        <span class="n">entry</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&quot;audited&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">wrap_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">router</span><span class="p">,</span> <span class="n">entry</span><span class="p">,</span> <span class="n">call_next</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called when handler is executed&quot;&quot;&quot;</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[AUDIT] Calling </span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">call_next</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[AUDIT] Result: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">wrapper</span>

<span class="c1"># Register and use</span>
<span class="n">Router</span><span class="o">.</span><span class="n">register_plugin</span><span class="p">(</span><span class="s2">&quot;audit&quot;</span><span class="p">,</span> <span class="n">AuditPlugin</span><span class="p">)</span>
<span class="n">router</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;audit&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="scope-and-channel">
<h2>Scope and Channel<a class="headerlink" href="#scope-and-channel" title="Link to this heading"></a></h2>
<section id="what-are-scope-and-channel">
<h3>What are scope and channel?<a class="headerlink" href="#what-are-scope-and-channel" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: I don’t understand the difference between “scope” and “channel”.</p>
<p><strong>Answer</strong>:</p>
<ul class="simple">
<li><p><strong>Scope</strong> = <strong>logical tag</strong> identifying visibility level (e.g., <code class="docutils literal notranslate"><span class="pre">internal</span></code>, <code class="docutils literal notranslate"><span class="pre">public_read</span></code>, <code class="docutils literal notranslate"><span class="pre">admin</span></code>)</p></li>
<li><p><strong>Channel</strong> = <strong>physical channel</strong> where the handler can be exposed (e.g., <code class="docutils literal notranslate"><span class="pre">CLI</span></code>, <code class="docutils literal notranslate"><span class="pre">HTTP</span></code>, <code class="docutils literal notranslate"><span class="pre">WS</span></code>, <code class="docutils literal notranslate"><span class="pre">MCP</span></code>)</p></li>
</ul>
<p>SmartRoute core no longer attaches or enforces scope/channel rules. To add them, use the SmartPublisher ecosystem plugin (<code class="docutils literal notranslate"><span class="pre">PublishPlugin</span></code>).</p>
<p><strong>Example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">smartpublisher.smartroute_plugins.publish</span><span class="w"> </span><span class="kn">import</span> <span class="n">PublishPlugin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">smartroute</span><span class="w"> </span><span class="kn">import</span> <span class="n">Router</span><span class="p">,</span> <span class="n">route</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;publish&quot;</span><span class="p">)</span>  <span class="c1"># import registers the plugin</span>

<span class="c1"># Handler with &quot;internal&quot; scope exposed only on CLI</span>
<span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;scopes&quot;</span><span class="p">:</span> <span class="s2">&quot;internal&quot;</span><span class="p">})</span>
<span class="k">def</span><span class="w"> </span><span class="nf">debug_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;memory&quot;</span><span class="p">:</span> <span class="s2">&quot;1GB&quot;</span><span class="p">,</span> <span class="s2">&quot;cpu&quot;</span><span class="p">:</span> <span class="s2">&quot;45%&quot;</span><span class="p">}</span>

<span class="n">router</span><span class="o">.</span><span class="n">publish</span><span class="o">.</span><span class="n">set_config</span><span class="p">(</span><span class="n">scope_channels</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;internal&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;CLI&quot;</span><span class="p">]})</span>

<span class="c1"># Filter by channel</span>
<span class="n">cli_only</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">members</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="s2">&quot;CLI&quot;</span><span class="p">)</span>  <span class="c1"># Includes debug_status</span>
<span class="n">http_only</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">members</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="s2">&quot;HTTP&quot;</span><span class="p">)</span>  <span class="c1"># Does NOT include debug_status</span>
</pre></div>
</div>
</section>
<section id="when-should-i-use-publishplugin">
<h3>When should I use PublishPlugin?<a class="headerlink" href="#when-should-i-use-publishplugin" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: In which scenarios is the publication plugin useful?</p>
<p><strong>Answer</strong>: Use <code class="docutils literal notranslate"><span class="pre">PublishPlugin</span></code> when:</p>
<ol class="arabic simple">
<li><p><strong>Multi-channel exposure</strong>: same app exposed on CLI, HTTP, WebSocket</p></li>
<li><p><strong>Security separation</strong>: internal vs public handlers</p></li>
<li><p><strong>API versioning</strong>: <code class="docutils literal notranslate"><span class="pre">public_v1</span></code>, <code class="docutils literal notranslate"><span class="pre">public_v2</span></code> with different channels</p></li>
<li><p><strong>MCP integration</strong>: limit handlers visible to AI agents</p></li>
</ol>
<p><strong>Practical example</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Publisher with CLI admin and HTTP public</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">smartpublisher.smartroute_plugins.publish</span><span class="w"> </span><span class="kn">import</span> <span class="n">PublishPlugin</span>
<span class="n">router</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;publish&quot;</span><span class="p">)</span>

<span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;scopes&quot;</span><span class="p">:</span> <span class="s2">&quot;admin&quot;</span><span class="p">})</span>
<span class="k">def</span><span class="w"> </span><span class="nf">restart_service</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># CLI only</span>
    <span class="o">...</span>

<span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;scopes&quot;</span><span class="p">:</span> <span class="s2">&quot;public&quot;</span><span class="p">})</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># CLI + HTTP</span>
    <span class="o">...</span>

<span class="c1"># Configuration</span>
<span class="n">router</span><span class="o">.</span><span class="n">publish</span><span class="o">.</span><span class="n">set_config</span><span class="p">(</span><span class="n">scope_channels</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;admin&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;CLI&quot;</span><span class="p">],</span>
    <span class="s2">&quot;public&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;CLI&quot;</span><span class="p">,</span> <span class="s2">&quot;HTTP&quot;</span><span class="p">]</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-use-cases">
<h2>Advanced Use Cases<a class="headerlink" href="#advanced-use-cases" title="Link to this heading"></a></h2>
<section id="how-do-i-register-handlers-dynamically">
<h3>How do I register handlers dynamically?<a class="headerlink" href="#how-do-i-register-handlers-dynamically" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: I want to add handlers at runtime, not just with decorators.</p>
<!-- test: test_switcher_basic.py::test_dynamic_router_add_entry_runtime -->
<p><strong>Answer</strong>: Use <code class="docutils literal notranslate"><span class="pre">router.add_entry()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lambda handler</span>
<span class="n">router</span><span class="o">.</span><span class="n">add_entry</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="s2">&quot;dynamic&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;dynamic_handler&quot;</span><span class="p">)</span>

<span class="c1"># External function</span>
<span class="k">def</span><span class="w"> </span><span class="nf">external_func</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">&quot;external&quot;</span>

<span class="n">router</span><span class="o">.</span><span class="n">add_entry</span><span class="p">(</span><span class="n">external_func</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;external&quot;</span><span class="p">)</span>

<span class="c1"># Register all marked methods (lazy registration)</span>
<span class="n">router</span><span class="o">.</span><span class="n">add_entry</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="how-do-i-handle-errors-and-defaults">
<h3>How do I handle errors and defaults?<a class="headerlink" href="#how-do-i-handle-errors-and-defaults" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: What happens if I call a non-existent handler?</p>
<!-- test: test_switcher_basic.py::test_get_with_default_returns_callable -->
<p><strong>Answer</strong>: You can specify a <strong>default handler</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Default handler</span>
<span class="k">def</span><span class="w"> </span><span class="nf">not_found</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;handler not found&quot;</span><span class="p">}</span>

<span class="n">router</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="n">default_handler</span><span class="o">=</span><span class="n">not_found</span><span class="p">)</span>
<span class="n">router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;missing&quot;</span><span class="p">)()</span>  <span class="c1"># Returns {&quot;error&quot;: &quot;handler not found&quot;}</span>

<span class="c1"># Without default</span>
<span class="n">router2</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api2&quot;</span><span class="p">)</span>
<span class="n">router2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;missing&quot;</span><span class="p">)()</span>  <span class="c1"># Raises KeyError</span>
</pre></div>
</div>
</section>
<section id="how-do-i-use-smartasync">
<h3>How do I use SmartAsync?<a class="headerlink" href="#how-do-i-use-smartasync" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: I want to wrap handlers with SmartAsync for async execution.</p>
<!-- test: test_switcher_basic.py::test_get_with_smartasync -->
<p><strong>Answer</strong>: Enable <code class="docutils literal notranslate"><span class="pre">use_smartasync</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Global for router</span>
<span class="n">router</span> <span class="o">=</span> <span class="n">Router</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="n">use_smartasync</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># For single call</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">,</span> <span class="n">use_smartasync</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># Override</span>

<span class="c1"># Runtime override</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;method&quot;</span><span class="p">,</span> <span class="n">use_smartasync</span><span class="o">=</span><span class="kc">True</span><span class="p">)()</span>
</pre></div>
</div>
<p><strong>Note</strong>: SmartAsync must be installed separately.</p>
</section>
<section id="how-do-i-introspect-the-structure">
<h3>How do I introspect the structure?<a class="headerlink" href="#how-do-i-introspect-the-structure" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: I want to see all registered handlers and children.</p>
<!-- test: test_switcher_basic.py::test_describe_returns_hierarchy -->
<p><strong>Answer</strong>: Use <code class="docutils literal notranslate"><span class="pre">members()</span></code> or <code class="docutils literal notranslate"><span class="pre">describe()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Structure snapshot</span>
<span class="n">members</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">members</span><span class="p">()</span>
<span class="c1"># {</span>
<span class="c1">#   &quot;handlers&quot;: {</span>
<span class="c1">#     &quot;list&quot;: {&quot;func&quot;: &lt;function&gt;, &quot;metadata&quot;: {...}},</span>
<span class="c1">#     &quot;create&quot;: {...}</span>
<span class="c1">#   },</span>
<span class="c1">#   &quot;children&quot;: {</span>
<span class="c1">#     &quot;sales&quot;: {...}</span>
<span class="c1">#   }</span>
<span class="c1"># }</span>

<span class="c1"># Full description</span>
<span class="n">description</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="c1"># {</span>
<span class="c1">#   &quot;name&quot;: &quot;api&quot;,</span>
<span class="c1">#   &quot;prefix&quot;: None,</span>
<span class="c1">#   &quot;plugins&quot;: [&quot;logging&quot;, &quot;pydantic&quot;],</span>
<span class="c1">#   &quot;methods&quot;: {...},</span>
<span class="c1">#   &quot;children&quot;: {...}</span>
<span class="c1"># }</span>

<span class="c1"># With filters</span>
<span class="n">internal_only</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">members</span><span class="p">(</span><span class="n">scopes</span><span class="o">=</span><span class="s2">&quot;internal&quot;</span><span class="p">)</span>
<span class="n">cli_handlers</span> <span class="o">=</span> <span class="n">router</span><span class="o">.</span><span class="n">members</span><span class="p">(</span><span class="n">channel</span><span class="o">=</span><span class="s2">&quot;CLI&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="comparisons">
<h2>Comparisons<a class="headerlink" href="#comparisons" title="Link to this heading"></a></h2>
<section id="smartroute-vs-decorator-dispatch">
<h3>SmartRoute vs decorator dispatch?<a class="headerlink" href="#smartroute-vs-decorator-dispatch" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: Why not use <code class="docutils literal notranslate"><span class="pre">functools.singledispatch</span></code>?</p>
<p><strong>Answer</strong>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">singledispatch</span></code> → dispatch by <strong>type</strong> of first argument</p></li>
<li><p>SmartRoute → dispatch by <strong>string name</strong> with metadata, plugins, hierarchies</p></li>
</ul>
<p>Different use cases: <code class="docutils literal notranslate"><span class="pre">singledispatch</span></code> for typed polymorphism, SmartRoute for dynamic routing.</p>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<section id="no-plugin-named-x-attached-to-router">
<h3>“No plugin named ‘X’ attached to router”<a class="headerlink" href="#no-plugin-named-x-attached-to-router" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: <code class="docutils literal notranslate"><span class="pre">AttributeError:</span> <span class="pre">No</span> <span class="pre">plugin</span> <span class="pre">named</span> <span class="pre">'logging'</span> <span class="pre">attached</span> <span class="pre">to</span> <span class="pre">router</span></code></p>
<p><strong>Solution</strong>: The plugin wasn’t attached. Use <code class="docutils literal notranslate"><span class="pre">.plug()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">router</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;logging&quot;</span><span class="p">)</span>  <span class="c1"># Now router.logging exists</span>
</pre></div>
</div>
</section>
<section id="handler-name-collision">
<h3>“Handler name collision”<a class="headerlink" href="#handler-name-collision" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Two methods with the same name registered on the same router.</p>
<p><strong>Solution</strong>: Use explicit names or prefixes:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;create_user&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">handle_create_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="o">...</span>

<span class="nd">@route</span><span class="p">(</span><span class="s2">&quot;api&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;create_order&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">handle_create_order</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="plugins-don-t-propagate-to-children">
<h3>Plugins don’t propagate to children<a class="headerlink" href="#plugins-don-t-propagate-to-children" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: Children don’t see parent plugins.</p>
<p><strong>Solution</strong>: Make sure to connect children <strong>after</strong> attaching plugins:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># CORRECT</span>
<span class="n">router</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;logging&quot;</span><span class="p">)</span>
<span class="n">router</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>  <span class="c1"># Child inherits logging</span>

<span class="c1"># WRONG</span>
<span class="n">router</span><span class="o">.</span><span class="n">add_child</span><span class="p">(</span><span class="n">child</span><span class="p">)</span>
<span class="n">router</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;logging&quot;</span><span class="p">)</span>  <span class="c1"># Child does NOT inherit</span>
</pre></div>
</div>
</section>
<section id="validationerror-with-pydantic">
<h3>ValidationError with Pydantic<a class="headerlink" href="#validationerror-with-pydantic" title="Link to this heading"></a></h3>
<p><strong>Problem</strong>: <code class="docutils literal notranslate"><span class="pre">ValidationError</span></code> even with correct input.</p>
<p><strong>Solution</strong>: Verify:</p>
<ol class="arabic simple">
<li><p>PydanticPlugin attached: <code class="docutils literal notranslate"><span class="pre">router.plug(&quot;pydantic&quot;)</span></code></p></li>
<li><p>Type hint correct: <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">method(self,</span> <span class="pre">req:</span> <span class="pre">MyModel)</span></code></p></li>
<li><p>Input is dict or model instance: <code class="docutils literal notranslate"><span class="pre">router.get(&quot;method&quot;)({&quot;field&quot;:</span> <span class="pre">&quot;value&quot;})</span></code></p></li>
</ol>
</section>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading"></a></h2>
<section id="when-should-i-use-smartroute">
<h3>When should I use SmartRoute?<a class="headerlink" href="#when-should-i-use-smartroute" title="Link to this heading"></a></h3>
<p>✅ <strong>Use SmartRoute when</strong>:</p>
<ul class="simple">
<li><p>You have many handlers to organize dynamically</p></li>
<li><p>You want to extend behavior with plugins</p></li>
<li><p>You need hierarchical routing (parent/child)</p></li>
<li><p>You have multi-channel exposure (CLI/HTTP/WS)</p></li>
</ul>
<p>❌ <strong>Don’t use SmartRoute when</strong>:</p>
<ul class="simple">
<li><p>You only have 2-3 simple methods (overkill)</p></li>
<li><p>You don’t need dynamic dispatch</p></li>
<li><p>You prefer explicit/static routing</p></li>
</ul>
</section>
<section id="does-plugin-order-matter">
<h3>Does plugin order matter?<a class="headerlink" href="#does-plugin-order-matter" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: Is the order of <code class="docutils literal notranslate"><span class="pre">.plug()</span></code> important?</p>
<p><strong>Answer</strong>: <strong>Yes</strong>. Plugins are applied <strong>in attachment order</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">router</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;logging&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">plug</span><span class="p">(</span><span class="s2">&quot;pydantic&quot;</span><span class="p">)</span>
<span class="c1"># Execution: logging → pydantic → handler → pydantic → logging</span>
</pre></div>
</div>
<p>Outer logging sees everything, inner Pydantic validates.</p>
</section>
<section id="how-do-i-test-code-with-smartroute">
<h3>How do I test code with SmartRoute?<a class="headerlink" href="#how-do-i-test-code-with-smartroute" title="Link to this heading"></a></h3>
<p><strong>Question</strong>: How do I write tests for handlers with SmartRoute?</p>
<p><strong>Answer</strong>: Test directly or via router:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Direct test</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_handler_logic</span><span class="p">():</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">obj</span><span class="o">.</span><span class="n">my_handler</span><span class="p">({</span><span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">})</span> <span class="o">==</span> <span class="n">expected</span>

<span class="c1"># Test via router</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_router_integration</span><span class="p">():</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;my_handler&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">handler</span><span class="p">({</span><span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="s2">&quot;test&quot;</span><span class="p">})</span> <span class="o">==</span> <span class="n">expected</span>
</pre></div>
</div>
</section>
</section>
<section id="useful-links">
<h2>Useful Links<a class="headerlink" href="#useful-links" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><strong><a class="reference internal" href="quickstart.html"><span class="std std-doc">Quick Start</span></a></strong> - Get started in 5 minutes</p></li>
<li><p><strong><a class="reference internal" href="guide/basic-usage.html"><span class="std std-doc">Basic Usage</span></a></strong> - Fundamental concepts</p></li>
<li><p><strong><a class="reference internal" href="guide/plugins.html"><span class="std std-doc">Plugin Guide</span></a></strong> - Plugin development</p></li>
<li><p><strong><a class="reference internal" href="guide/hierarchies.html"><span class="std std-doc">Hierarchies</span></a></strong> - Nested routing</p></li>
<li><p><strong><a class="reference internal" href="api/reference.html"><span class="std std-doc">API Reference</span></a></strong> - Complete documentation</p></li>
</ul>
</section>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Link to this heading"></a></h2>
<p>Have more questions? <a class="reference external" href="https://github.com/genropy/smartroute/issues">Open an issue</a> or contribute to this FAQ!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quick Start" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="guide/basic-usage.html" class="btn btn-neutral float-right" title="Basic Usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Genropy Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>